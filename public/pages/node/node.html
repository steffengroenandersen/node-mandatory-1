<h1>NodeJS 101</h1>
<p>
  NodeJS er en JavaScript runtime, som vi bruger til at eksekvere vores JavaScript kode et andet sted end i
  browseren. Browseren har en JavaScript motor kaldet V8(der findes også andre), som er udviklet af Google.Det
  er denne motor der oversætter JavaScript koden til maskinkode.<br /><br />
  Udvikleren af NodeJS har taget V8 motoren og sørget for at vi kan køre det andre steder end i browseren.
  Derudover tillader NodeJs også at vores programmer snakker sammen med vores computer, så vi fx har adgang
  til filer på computeren, samt netværk og HTTP funktionalitet.
</p>

<div class="quote-block">
  <div class="quote-text">
    Node.js is an open-source and cross-platform JavaScript runtime environment. It is a popular tool for
    almost any kind of project! <br /><br />Node.js runs the V8 JavaScript engine, the core of Google Chrome,
    outside of the browser. This allows Node.js to be very performant. <br /><br />A Node.js app runs in a
    single process, without creating a new thread for every request. Node.js provides a set of asynchronous
    I/O primitives in its standard library that prevent JavaScript code from blocking and generally, libraries
    in Node.js are written using non-blocking paradigms, making blocking behavior the exception rather than
    the norm.
  </div>
  <div class="quote-source">Source: https://nodejs.org/en/learn/getting-started/introduction-to-nodejs</div>
</div>

<p>
  NodeJS er især god til at bygge serverbaserede applikationer da det er bygget med fokus på asynkron,
  ikke-blokerende kode. Det betyder dog også, at hvis ens program skal lave mange beregninger, så er det ikke
  ideelt. En anden fordel, som blandt andet gør at jeg har dykket ned i NodeJS er, at det tillader at man kan
  bygge en frontend og backend i samme sprog, hvilket tillader hurtig udvikling. <br /><br />Netflix er en
  virksomhed som er kendt for at bruge NodeJS.
</p>

<div class="quote-block">
  <div class="quote-text">
    The primary reason is to use a similar language on both the server side and the browser side that Node.js
    has in terms of performance. Node has a large number of modules, most of which are free source, and they
    reduced their startup time from 40 minutes or more to under a minute, to create a single-page application.
  </div>
  <div class="quote-source">Source: https://www.bellcorpstudio.com/blog/how-netflix-is-using-node-js</div>
</div>

<p>På nuværende tidspunkt bruger jeg Node version 20.11.0</p>

<div class="code-block">
  <div class="code-title">Hvordan man ser ens version af node i kommandolinjen</div>
  <div class="code-text">1 $ node --version 2 v20.11.0</div>
</div>

<h2>Node Package Manager</h2>

<p>
  Node har en package manager, som den bruger til at holde styr på programmets afhængigheder. Standard package
  manageren er “Node Package Manager”, men der findes også andre værktøjer, som fx Yarn, som er udviklet af
  Facebook.
  <br /><br />
  Node Package Manager tillader at man som udvikler kan installere og opdatere software fra andre biblioteker,
  som man dernæst kan bruge i sit eget program - og det giver os derfor også mulighed for at bruge udvalgte
  versioner af ekstern software. På den måde kan Node Package Manger sammenlignes med Maven eller Gradle
  indenfor Java verdenen.
  <br /><br />
  Måden hvorpå det fungerer ved at man definerer sit programs afhængigheder i filen kaldet “package.json”,
  hvorefter man kører kommandolinjen “npm install”. Eksempler på denne kommandolinje og en package.json fil
  kan ses nedenfor.
</p>

<div class="code-block">
  <div class="code-title">Installering af package.json filer</div>
  <div class="code-text">1 npm install</div>
</div>

<div class="code-block">
  <div class="code-title">Package.json</div>
  <div class="code-text">
    {
      "type": "module",
      "dependencies": {
        "@faker-js/faker": "8.4.1",
        "express": "^4.18.3"
      },
      "scripts": {
        "dev": "nodemon --ext html,js, json app.js"
      }
    }
    
  </div>
</div>

<h2>Scripts(ext)</h2>
<p>
  Udover at sørge for vores programs afhængigheder så kan Node Package Manager også bruges til at køre scripts og kommandoer i et projekt. Det gør at vi kan automatisere en række af vores opgaver hvis vi fx vil starte et udviklingsmiljø op, eller køre tests. 
  <br><br>
  Ovenfor ses det hvordan vi har defineret et script kaldet “dev” i vores package.json fil. Den sørger for at nodemon lytter efter ændringer i filerne html, js og json, og dernæst genkører projektet ved ændringer i disse fil typer.
</p>

<div class="code-block">
  <div class="code-title">Sådan kører man et script via Node Package Manager  </div>
  <div class="code-text">
npm run dev
  </div>
</div>

<p>Når man installerer afhængigheder via Node Package Manager så bliver de downloadet og gemt i mappen kaldet “node_modules”. Dernæst kan vi importerer funktionaliteten i det downloadede materiale til vores eget program ved at importere det.
  <br><br>
  Der er to måder at importere det på, som kan ses nedenfor, og det har at gøre med hvilket modul-system man gør brug af.
  <br><br>
  CommonJS har funktionaliteten “require()”.
  <br><br>
  ECMAScript fra 2015 og frem har funktionaliteten “import”.
  <br><br>
  Vi definerer i vores package.json hvilken en vi vil gøre brug af.
</p>

<h2>Indlæsning af filer</h2>
<p>Som beskrevet ovenfor har NodeJS også mulighed for at hente filer på ens eget system. Nednefor kan man se et stykke kode der viser hvordan vi gør brug af dette.</p>

<div class="code-block">
  <div class="code-title">Importering af fil</div>
  <div class="code-text">
import fs from "fs";

const header = fs.readFileSync("./public/components/header/header.html").toString();    
  </div>
</div>
